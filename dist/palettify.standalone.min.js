/*!
 * palettify v0.0.0 
 * (c) 2017 Dobromir Hristov
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@mariotacke/color-thief")):"function"==typeof define&&define.amd?define(["@mariotacke/color-thief"],t):e.palettify=t(e.colorThief)}(this,function(e){"use strict";function t(){function t(t){var o=t;if(!t)throw Error("Target is not an element",t);return"IMG"!==t.tagName&&t.style.backgroundImage&&Error("Tag provided is not an image and does not have a background-image style attached to it."),"IMG"!==t.tagName&&(o=new Image(t.offsetWidth,t.offsetHeight),o.src=t.style.backgroundImage.replace("url(","").replace(")","").replace(/"/gi,"")),(new e).getPalette(o,3)}function o(e,t){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function n(e,t){var n,r=i.options,a=r.opacity,l=r.opacitySecondary,s=r.boxShadowTemplate,c=e[i.options.colorIndexToUse],d=o(c,a),u=o(c,l);n=s?s.replace("{color}",d).replace("{colorSecondary}",u):"0 2px 2px "+d+", 0 4px 4px "+d+", 0 8px 8px "+d+", 0 16px 16px "+d+", 0 32px 32px "+u+", 0 64px 64px "+u,t.colors=e,t.rgbaColor=d,t.rgbaColorSecondary=u,t.boxShadow=n}var r=!1,a={hoverTarget:Error("Please provide hoverTarget"),imageTarget:Error("Please provide ImageSrc"),attachBoxShadowTo:null,opacity:.2,opacitySecondary:.2,hoverClass:"box-shadow-attached",colorIndexToUse:0,enterEvent:"mouseenter",leaveEvent:"mouseleave",boxShadowTemplate:""},i={options:{},elements:[],collectElements:function(){var e=i.options.hoverTarget;if("string"==typeof e&&(e=document.querySelectorAll(e)),e.length)for(var t=0;t<e.length;t++){var o=e[t],n=o.querySelector(i.options.imageTarget),r={hoverTarget:o,image:n};i.elements.push(r)}},attachBoxShadowToCollection:function(){i.elements.forEach(function(e){n(t(e.image),e)})},enterHandler:function(e){return function(t){var o=t.currentTarget.querySelector(i.options.attachBoxShadowTo||i.options.imageTarget);o&&(o.classList.add(i.options.hoverClass),o.style.boxShadow=e.boxShadow)}},leaveHandler:function(e){return function(e){var t=e.currentTarget.querySelector(i.options.attachBoxShadowTo||i.options.imageTarget);t&&(t.classList.remove(i.options.hoverClass),t.style.boxShadow="")}},attachEventListeners:function(){var e=i.options,t=e.enterEvent,o=e.leaveEvent;i.elements.forEach(function(e){e.enterHandler=i.enterHandler(e),e.leaveHandler=i.leaveHandler(e),e.hoverTarget.addEventListener(t,e.enterHandler,!1),e.hoverTarget.addEventListener(o,e.leaveHandler,!1)})},detachEventListeners:function(){var e=i.options,t=e.enterEvent,o=e.leaveEvent;i.elements.forEach(function(e){e.hoverTarget.removeEventListener(t,e.enterHandler,!1),e.hoverTarget.removeEventListener(o,e.leaveHandler,!1)})},init:function(e){if(r)throw new Error("Palettify is already initialized");return i.options=Object.assign({},a,e),i.collectElements(),i.attachBoxShadowToCollection(),i.attachEventListeners(),r=!0,i},destroy:function(){i.detachEventListeners(),i.elements=[],r=!1},reInit:function(){i.destroy(),i.init(i.options)},setOptions:function(e,t){void 0===t&&(t=!0),i.options=Object.assign({},i.options,e),t&&i.reInit()},isInitialized:function(){return r}};return i}return e="default"in e?e.default:e,t});