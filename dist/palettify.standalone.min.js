/*!
 * palettify v0.0.0 
 * (c) 2017 Dobromir Hristov
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@mariotacke/color-thief")):"function"==typeof define&&define.amd?define(["@mariotacke/color-thief"],t):e.palettify=t(e.colorThief)}(this,function(e){"use strict";function t(){function t(t){var r=t;if(!t)throw Error("Target is not an element",t);return"IMG"!==t.tagName&&t.style.backgroundImage&&Error("Tag provided is not an image and does not have a background-image style attached to it."),"IMG"!==t.tagName&&(r=new Image(t.offsetWidth,t.offsetHeight),r.src=t.style.backgroundImage.replace("url(","").replace(")","").replace(/"/gi,"")),(new e).getPalette(r,3)}function r(e,t){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function o(e,t){var o,n=i.options,a=n.opacity,s=n.opacitySecondary,c=n.boxShadowTemplate,l=e[i.options.colorIndexToUse],d=r(l,a),v=r(l,s);o=c?c.replace("{color}",d).replace("{colorSecondary}",v):"0 2px 2px "+d+", 0 4px 4px "+d+", 0 8px 8px "+d+", 0 16px 16px "+d+", 0 32px 32px "+v+", 0 64px 64px "+v,t.colors=e,t.rgbaColor=d,t.rgbaColorSecondary=v,t.boxShadow=o}var n=!1,a={hoverTarget:Error("Please provide hoverTarget"),imageTarget:Error("Please provide ImageSrc"),attachBoxShadowTo:null,opacity:.2,opacitySecondary:.2,hoverClass:"box-shadow-attached",colorIndexToUse:0,enterEvent:"mouseenter",leaveEvent:"mouseleave",boxShadowTemplate:""},i={options:{},elements:[],collectElements:function(){var e=i.options.hoverTarget;if("string"==typeof e&&(e=document.querySelectorAll(e)),e.length)for(var t=0;t<e.length;t++){var r=e[t],o=r.querySelector(i.options.imageTarget),n={hoverTarget:r,image:o};i.elements.push(n)}},attachBoxShadowToCollection:function(){i.elements.forEach(function(e){o(t(e.image),e)})},enterHandler:function(e){return function(t){var r=t.currentTarget.querySelector(i.options.attachBoxShadowTo||i.options.imageTarget);r&&(r.classList.add(i.options.hoverClass),r.style.boxShadow=e.boxShadow)}},leaveHandler:function(e){return function(e){var t=e.currentTarget.querySelector(i.options.attachBoxShadowTo||i.options.imageTarget);t&&(t.classList.remove(i.options.hoverClass),t.style.boxShadow="")}},attachEventListeners:function(){var e=i.options,t=e.enterEvent,r=e.leaveEvent;i.elements.forEach(function(e){e.enterHandler=i.enterHandler(e),e.leaveHandler=i.leaveHandler(e),Array.isArray(t)&&Array.isArray(r)?(t.forEach(function(t){e.hoverTarget.addEventListener(t,e.enterHandler,!1)}),r.forEach(function(t){e.hoverTarget.addEventListener(t,e.leaveHandler,!1)})):(e.hoverTarget.addEventListener(t,e.enterHandler,!1),e.hoverTarget.addEventListener(r,e.leaveHandler,!1))})},detachEventListeners:function(){var e=i.options,t=e.enterEvent,r=e.leaveEvent;i.elements.forEach(function(e){Array.isArray(t)&&Array.isArray(r)?(t.forEach(function(t){e.hoverTarget.removeEventListener(t,e.enterHandler,!1)}),r.forEach(function(t){e.hoverTarget.removeEventListener(t,e.leaveHandler,!1)})):(e.hoverTarget.removeEventListener(t,e.enterHandler,!1),e.hoverTarget.removeEventListener(r,e.leaveHandler,!1))})},init:function(e){if(n)throw new Error("Palettify is already initialized");return i.options=Object.assign({},a,e),i.collectElements(),i.attachBoxShadowToCollection(),i.attachEventListeners(),n=!0,i},destroy:function(){i.detachEventListeners(),i.elements=[],n=!1},reInit:function(){i.destroy(),i.init(i.options)},setOptions:function(e,t){void 0===t&&(t=!0),i.options=Object.assign({},i.options,e),t&&i.reInit()},isInitialized:function(){return n}};return i}return e="default"in e?e.default:e,t});